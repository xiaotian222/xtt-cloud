# 公文审批流程设计

## 流程模型设计

### 流程定义
流程定义是审批流程的模板，包含流程的基本信息和节点定义。

### 节点类型
1. **审批节点**：需要指定人员进行审批操作
2. **抄送节点**：通知相关人员，无需审批
3. **条件节点**：根据条件决定流程走向
4. **并行节点**：支持多个并行处理分支
5. **汇聚节点**：等待所有并行分支完成后继续

### 审批人类型
1. **指定人员**：直接指定具体的审批人
2. **指定角色**：指定角色，系统自动获取该角色下的人员
3. **指定部门负责人**：指定部门，系统自动获取部门负责人
4. **发起人指定**：由公文发起人指定审批人

## 发文流程详细设计

发文流程严格按照以下顺序执行：
1. **起草**：拟稿人员创建公文
2. **审核**：核稿组并行审核
3. **核稿**：对应核稿组并行处理
4. **单位内办理**：并行或串行处理
5. **领导签发**：领导审批签发
6. **外单位办理**：外单位并行签收登记
7. **印发办结**：正式印发并办结
8. **归档**：归档保存

### 发文流程节点设计

#### 1. 起草节点
- **节点名称**：拟稿
- **节点类型**：审批节点
- **审批人**：办文科/办公室人员
- **处理时限**：2个工作日

#### 2. 审核节点
- **节点名称**：核稿组审核
- **节点类型**：并行节点
- **审批人**：对应核稿组人员（并行处理）
- **处理时限**：3个工作日

#### 3. 核稿节点
- **节点名称**：核稿处理
- **节点类型**：并行节点
- **审批人**：对应核稿组人员（并行处理）
- **处理时限**：2个工作日

#### 4. 单位内办理节点
- **节点名称**：单位内办理
- **节点类型**：可配置（并行/串行）
- **审批人**：相关部门人员
- **处理时限**：根据配置确定

#### 5. 领导签发节点
- **节点名称**：领导签发
- **节点类型**：审批节点
- **审批人**：指定领导
- **处理时限**：1个工作日

#### 6. 外单位办理节点
- **节点名称**：外单位办理
- **节点类型**：并行节点
- **审批人**：外单位接收人员（并行处理）
- **处理时限**：5个工作日

#### 7. 印发办结节点
- **节点名称**：印发办结
- **节点类型**：审批节点
- **审批人**：办文科/办公室人员
- **处理时限**：1个工作日

#### 8. 归档节点
- **节点名称**：归档
- **节点类型**：自动节点
- **处理人**：系统自动处理
- **处理时限**：即时

## 收文流程详细设计

收文流程严格按照以下顺序执行：
1. **外部文件**：接收外部来文
2. **登记**：文件登记和基本信息录入
3. **拟办**：拟办人提出处理建议
4. **领导批示**：领导对文件进行批示
5. **承办**：相关部门或人员承办文件
6. **办结**：文件处理完成并归档

### 收文流程节点设计

#### 1. 外部文件节点
- **节点名称**：接收外部文件
- **节点类型**：自动节点
- **处理人**：系统自动处理/收发室人员
- **处理时限**：即时

#### 2. 登记节点
- **节点名称**：文件登记
- **节点类型**：审批节点
- **审批人**：办公室文秘人员
- **处理时限**：1个工作日

#### 3. 拟办节点
- **节点名称**：拟办建议
- **节点类型**：审批节点
- **审批人**：办公室主任或指定拟办人
- **处理时限**：1个工作日

#### 4. 领导批示节点
- **节点名称**：领导批示
- **节点类型**：审批节点
- **审批人**：指定领导
- **处理时限**：2个工作日

#### 5. 承办节点
- **节点名称**：文件承办
- **节点类型**：审批节点
- **审批人**：承办部门或人员
- **处理时限**：根据文件要求确定

#### 6. 办结节点
- **节点名称**：办结归档
- **节点类型**：审批节点
- **审批人**：办公室文秘人员
- **处理时限**：1个工作日

## 流程执行机制

### 流程启动
当公文提交审批时，系统根据公文类型匹配对应的流程定义，创建流程实例。

### 节点执行
1. 系统根据节点定义自动分配审批人
2. 生成待办事项通知审批人
3. 审批人处理待办事项
4. 系统更新节点状态并创建已办记录

### 并行处理机制
1. **并行节点启动**：当流程到达并行节点时，系统同时创建多个并行分支
2. **并行任务分配**：每个分支独立分配审批人并生成待办事项
3. **并行任务处理**：各审批人可同时处理各自的任务
4. **汇聚等待**：所有并行分支完成后，流程继续向下执行

### 流程结束
当所有节点都处理完成时，流程结束，公文状态更新为已发布。

## 待办/已办管理

### 待办事项生成
- 流程节点需要处理时自动生成
- 包含公文信息、处理人、截止时间等
- 支持优先级和提醒机制

### 已办事项记录
- 审批人处理完待办事项后自动生成
- 记录处理操作、意见、时间等信息
- 支持查询和统计

### 通知提醒
- 站内消息推送
- 邮件通知（可选）
- 超时提醒机制